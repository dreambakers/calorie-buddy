<div class="container h-100">
    <div class="row h-100 justify-content-center align-items-center">
      <div class="col-lg-10 col-xl-9 mx-auto pb-1">
        <div class="card card-signin flex-column flex-md-row my-1">
            <div class="card-img-left d-none d-md-flex flex-column align-items-center justify-content-center">
                <mat-icon>restaurant</mat-icon>
                <h4 class="m-0">
                  Calorie Buddy
                </h4>
            </div>

          <div class="card-body d-flex flex-column align-items-center justify-content-center">
            <h5 class="card-title text-center">
              Signup
            </h5>

            <form class="form-signin" [formGroup]="signupForm" (ngSubmit)="onSubmit()">

              <div class="form-group">

                <label>Username</label>

                <input type="text" formControlName="username" class="form-control"
                  [ngClass]="{ 'is-invalid': submitted && f.username.errors }" required>

                <div *ngIf="submitted && f.username.errors" class="invalid-feedback">
                  <div *ngIf="f.username.errors.required">
                    Username is required
                  </div>
                  <div *ngIf="f.username.errors.minlength || f.username.errors.pattern">
                    Username must be at least 5 characters and can only contain alphabets and numbers
                  </div>
                  <div *ngIf="f.username.errors.usernameExists">
                    A user with the same username already exists
                  </div>
                </div>
              </div>

              <div class="form-group">

                <label>Email</label>

                <input type="email" formControlName="email" class="form-control"
                  [ngClass]="{ 'is-invalid': submitted && f.email.errors }" required>

                <div *ngIf="submitted && f.email.errors" class="invalid-feedback">
                  <div *ngIf="f.email.errors.required">
                    Email address is required
                  </div>
                  <div *ngIf="f.email.errors.email">Email must be a valid email address</div>
                  <div *ngIf="f.email.errors.emailExists">
                    A user with the same email already exists
                  </div>
                </div>

              </div>

              <div class="form-group">

                <label>Password</label>

                <input type="password" formControlName="password" class="form-control"
                  [ngClass]="{ 'is-invalid': submitted && f.password.errors }" required>

                <div *ngIf="submitted && f.password.errors" class="invalid-feedback">
                  <div *ngIf="f.password.errors.required">
                    Password is required
                  </div>
                  <div *ngIf="f.password.errors.minlength">
                    Password must be at least 6 characters
                  </div>
                </div>

              </div>

              <button mat-raised-button color="primary" class="w-100 text-uppercase mt-2" type="submit" [disabled]="submitted && loading">
                Signup
                <div class="spinner-border" role="status" *ngIf="submitted && loading">
                  <span class="sr-only">Loading...</span>
                </div>
              </button>

              <a class="d-block text-center mt-5 small" [routerLink]="[ '/login' ]">
                Already registered? Login here.
              </a>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>